var DiscordTransport=(()=>{var yt=Object.create;var L=Object.defineProperty,vt=Object.defineProperties,xt=Object.getOwnPropertyDescriptor,Rt=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertyNames,G=Object.getOwnPropertySymbols,Pt=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable;var V=(a,t,e)=>t in a?L(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,H=(a,t)=>{for(var e in t||(t={}))W.call(t,e)&&V(a,e,t[e]);if(G)for(var e of G(t))Qt.call(t,e)&&V(a,e,t[e]);return a},J=(a,t)=>vt(a,Rt(t)),z=a=>L(a,"__esModule",{value:!0});var K=(a=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(a,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):a)(function(a){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+a+'" is not supported')});var Tt=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),It=(a,t)=>{z(a);for(var e in t)L(a,e,{get:t[e],enumerable:!0})},Lt=(a,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of bt(t))!W.call(a,s)&&s!=="default"&&L(a,s,{get:()=>t[s],enumerable:!(e=xt(t,s))||e.enumerable});return a},Y=a=>Lt(z(L(a!=null?yt(Pt(a)):{},"default",a&&a.__esModule&&"default"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var X=Tt((qt,q)=>{var U=(()=>{var a=Object.create,t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,x=(i,r,o)=>r in i?t(i,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[r]=o,Q=(i,r)=>{for(var o in r||(r={}))l.call(r,o)&&x(i,o,r[o]);if(u)for(var o of u(r))y.call(r,o)&&x(i,o,r[o]);return i},S=i=>t(i,"__esModule",{value:!0}),st=(i,r)=>function(){return r||(0,i[Object.keys(i)[0]])((r={exports:{}}).exports,r),r.exports},it=(i,r)=>{S(i);for(var o in r)t(i,o,{get:r[o],enumerable:!0})},rt=(i,r,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let h of s(r))!l.call(i,h)&&h!=="default"&&t(i,h,{get:()=>r[h],enumerable:!(o=e(r,h))||o.enumerable});return i},at=i=>rt(S(t(i!=null?a(c(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i),nt=st({"node_modules/.pnpm/short-unique-id@4.4.4/node_modules/short-unique-id/dist/short-unique-id.js"(i,r){var o=(()=>{var h=Object.defineProperty,w=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,P=(m,d,f)=>d in m?h(m,d,{enumerable:!0,configurable:!0,writable:!0,value:f}):m[d]=f,v=(m,d)=>{for(var f in d||(d={}))R.call(d,f)&&P(m,f,d[f]);if(w)for(var f of w(d))b.call(d,f)&&P(m,f,d[f]);return m},T=m=>h(m,"__esModule",{value:!0}),pt=(m,d)=>{T(m);for(var f in d)h(m,f,{get:d[f],enumerable:!0})},M={};pt(M,{DEFAULT_UUID_LENGTH:()=>O,default:()=>k});var _t="4.4.4",O=6,dt={dictionary:"alphanum",shuffle:!0,debug:!1,length:O},C=class extends Function{constructor(m={}){super();this.dictIndex=0,this.dictRange=[],this.lowerBound=0,this.upperBound=0,this.dictLength=0,this._digit_first_ascii=48,this._digit_last_ascii=58,this._alpha_lower_first_ascii=97,this._alpha_lower_last_ascii=123,this._hex_last_ascii=103,this._alpha_upper_first_ascii=65,this._alpha_upper_last_ascii=91,this._number_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii]},this._alpha_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alpha_lower_dict_ranges={lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alpha_upper_dict_ranges={upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._alphanum_lower_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]},this._alphanum_upper_dict_ranges={digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]},this._hex_dict_ranges={decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]},this.log=(...n)=>{let p=[...n];if(p[0]=`[short-unique-id] ${n[0]}`,this.debug===!0&&typeof console!="undefined"&&console!==null)return console.log(...p)},this.setDictionary=(n,p)=>{let _;if(n&&Array.isArray(n)&&n.length>1)_=n;else{_=[];let g;this.dictIndex=g=0;let I=`_${n}_dict_ranges`,N=this[I];Object.keys(N).forEach(mt=>{let wt=mt;for(this.dictRange=N[wt],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=g=this.lowerBound;this.lowerBound<=this.upperBound?g<this.upperBound:g>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?g+=1:g-=1)_.push(String.fromCharCode(this.dictIndex))})}if(p){let g=.5;_=_.sort(()=>Math.random()-g)}this.dict=_,this.dictLength=this.dict.length,this.counter=0},this.seq=()=>this.sequentialUUID(),this.sequentialUUID=()=>{let n,p,_="";n=this.counter;do p=n%this.dictLength,n=Math.trunc(n/this.dictLength),_+=this.dict[p];while(n!==0);return this.counter+=1,_},this.randomUUID=(n=this.uuidLength||O)=>{let p,_,g;if(n===null||typeof n=="undefined"||n<1)throw new Error("Invalid UUID Length Provided");let I=n>=0;for(p="",g=0;g<n;g+=1)_=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,p+=this.dict[_];return p},this.availableUUIDs=(n=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,n).toFixed(0)),this.approxMaxBeforeCollision=(n=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*n).toFixed(20)),this.collisionProbability=(n=this.availableUUIDs(this.uuidLength),p=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(n)/this.availableUUIDs(p)).toFixed(20)),this.uniqueness=(n=this.availableUUIDs(this.uuidLength))=>{let p=parseFloat((1-this.approxMaxBeforeCollision(n)/n).toFixed(20));return p>1?1:p<0?0:p},this.getVersion=()=>this.version,this.stamp=n=>{if(typeof n!="number"||n<10)throw new Error("Param finalLength must be number greater than 10");let p=Math.floor(+new Date/1e3).toString(16),_=n-9,g=Math.round(Math.random()*(_>15?15:_)),I=this.randomUUID(_);return`${I.substr(0,g)}${p}${I.substr(g)}${g.toString(16)}`},this.parseStamp=n=>{if(n.length<10)throw new Error("Stamp length invalid");let p=parseInt(n.substr(n.length-1,1),16);return new Date(parseInt(n.substr(p,8),16)*1e3)};let d=v(v({},dt),m);this.counter=0,this.debug=!1,this.dict=[],this.version=_t;let{dictionary:f,shuffle:gt,length:ft}=d;return this.uuidLength=ft,this.setDictionary(f,gt),this.debug=d.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength}`),new Proxy(this,{apply:(n,p,_)=>this.randomUUID(..._)})}},k=C;return k.default=C,M})();typeof r!="undefined"&&(r.exports=o.default),typeof window!="undefined"&&(o=o.default)}}),j={};it(j,{default:()=>ct});var ot=at(nt()),ut="2.0.0",lt=new ot.default({length:8}),ht={waitTimeBetweenRuns:100,getResultTimeout:6e4,maxRetries:1,cleanupResultsOlderThan:6e4},B=i=>new Promise(r=>setTimeout(r,i)),E=class{constructor(i,r){this._queue=[],this._processing=!1,this.results=[],this.processQueuePromise=Promise.resolve([]),this._tryFn=async(o,h,w)=>{let R=0,b;for(;(!b||b.error)&&R<=this._options.maxRetries;){R++;try{await B(this._options.waitTimeBetweenRuns);let P=await this._fn(h),v=Date.now(),T=v-w;b={id:o,duration:T,startTimestamp:w,endTimestamp:v,result:P}}catch(P){let v=Date.now(),T=v-w;b={id:o,duration:T,startTimestamp:w,endTimestamp:v,error:P}}}return b},this._fn=i,this._options=Q(Q({},ht),r||{})}queuePayload(i){let r=lt();return this._queue.push({payload:i,id:r}),r}async _processQueue(){this._processing=!0;let i,r=Date.now();for(;i=this._queue.shift();){let{payload:o,id:h}=i;try{let w=await this._tryFn(h,o,r);this.results.push(Q({},w))}catch(w){let R=Date.now();this.results.push({id:h,startTimestamp:r,duration:R-r,endTimestamp:R,error:w})}}this._processing=!1}cleanupResults(){this.results=this.results.filter(i=>Date.now()-i.endTimestamp<this._options.cleanupResultsOlderThan)}async processQueue(){this._processing||(this.cleanupResults(),this.processQueuePromise=this._processQueue().then(()=>this.results))}async getResult(i){this.cleanupResults();let r=this.results.find(h=>h.id===i),o=Date.now();for(;!r&&Date.now()-o<this._options.getResultTimeout;)await B(this._options.waitTimeBetweenRuns),r=this.results.find(h=>h.id===i);if(!r){let h=Date.now();return{id:i,startTimestamp:o,duration:h-o,endTimestamp:h,error:new Error(`Result for id ${i} not found (timeout of ${this._options.getResultTimeout}ms exceeded)`)}}return this.results=this.results.filter(h=>h.id!==i),r}};E.version=ut;var ct=E;return j})();typeof q!="undefined"&&(q.exports=U.default),typeof window!="undefined"&&(U=U.default)});var Ot={};It(Ot,{Multipart:()=>A,default:()=>D,version:()=>F});var Z=Y(X()),tt=Y(K("@simplyhexagonal/logger"));var F="3.1.2";var $;typeof window!="undefined"?$=window.axios:$=K("axios");var Dt=a=>new Promise(t=>setTimeout(t,a)),A=class{constructor(...t){this.boundary="loggerTransportDiscord";this.multipart="";t.length>0&&t.forEach(({name:e,data:s,fileName:u})=>{this.append(e,s,u)})}append(t,e,s){if(!e)return;let u=`Content-Disposition: form-data; name="${t}"`;s&&(u+=`; filename="${s}"`),u+=`
Content-Type: text/plain; charset=utf-8
`,this.multipart+=`--${this.boundary}
${u}
${e}
--${this.boundary}--
`}},et=420,D=class extends tt.LoggerTransport{constructor(t){let e=Math.random().toString(36).substring(7);super(J(H({},t),{r:e}));if(this.destination=t.destination,e!==this._r)return this;this._rateLimit=t.rateLimit||et,this._axios=$.create({url:this.destination});let s=async c=>this.postToWebhook(c),u=new Z.default(s,{waitTimeBetweenRuns:this._rateLimit,maxRetries:0});this._fnQ=u}async debug([t,...e]){let s=this._fnQ,u=s.queuePayload({infoString:`**${t} DEBUG** \u{1F41E}\uFE0F:`,message:`${this.format(e)}`});s.processQueue();let{result:c,error:l}=await s.getResult(u);if(l)throw l;return c}async info([t,...e]){let s=this._fnQ,u=s.queuePayload({infoString:`**${t} INFO** \u2705\uFE0F\uFE0F:`,message:`${this.format(e)}`});s.processQueue();let{result:c,error:l}=await s.getResult(u);if(l)throw l;return c}async warn([t,...e]){let s=this._fnQ,u=s.queuePayload({infoString:`**${t} WARN** \u{1F7E1}:`,message:`${this.format(e)}`});s.processQueue();let{result:c,error:l}=await s.getResult(u);if(l)throw l;return c}async error([t,...e]){let s=this._fnQ,u=s.queuePayload({infoString:`**${t} ERROR** \u{1F6A8}\uFE0F:`,message:`${this.format(e)}`});s.processQueue();let{result:c,error:l}=await s.getResult(u);if(l)throw l;return c}async fatal([t,...e]){let s=this._fnQ,u=s.queuePayload({infoString:`**${t} FATAL** \u{1F480}:`,message:`${this.format(e)}`});s.processQueue();let{result:c,error:l}=await s.getResult(u);if(l)throw l;return c}async all([t,...e]){let s=this._fnQ,u=s.queuePayload({infoString:`**${t} ALL** \u{1F4DD}:`,message:`${this.format(e)}`});s.processQueue();let{result:c,error:l}=await s.getResult(u);if(l)throw l;return c}async raw([t,...e]){let s=this._fnQ,u=s.queuePayload({infoString:"",message:this.format(e)});s.processQueue();let{result:c,error:l}=await s.getResult(u);if(l)throw l;return c}async postToWebhook({infoString:t,message:e}){let s=Boolean(t.length+e.length>=2e3),u="";t.length>0?u=s?t:`${t}
\`\`\`
${e}
\`\`\``:s||(u=e);let c,l={},y;if(u.length>0&&(c={content:u},y=await this._axios.post(this.destination,c,l).catch(x=>({status:400,reason:x})),y.status<200||y.status>399))throw new Error(`Bad Response: ${y.reason}`);if(s){let x=new A({name:"file",data:e,fileName:"message.txt"});if(c=x.multipart,l={headers:{"Content-Type":`multipart/form-data; boundary=${x.boundary}`}},await Dt(this._rateLimit||et),y=await this._axios.post(this.destination,c,l).catch(Q=>({status:400,reason:Q})),y.status<200||y.status>399)throw new Error(`Bad Response: ${y.reason}`)}return{destination:this.destination,channelName:this.channelName,result:!0}}};D.version=F;return Ot;})();
'undefined'!=typeof module&&(module.exports=DiscordTransport.default),'undefined'!=typeof window&&(DiscordTransport=DiscordTransport.default);